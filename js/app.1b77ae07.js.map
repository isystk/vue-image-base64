{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/vue-image-base64.vue","webpack:///./src/vue-image-base64.vue?15b6","webpack:///./dev/serve.vue","webpack:///./dev/serve.vue?061e","webpack:///./dev/serve.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","$props","_createElementBlock","_hoisted_1","_createElementVNode","id","class","$data","onDragover","$options","onDragleave","onDrop","_toDisplayString","type","accept","capture","multiple","onChange","_hoisted_3","isHover","props","maxFileSize","Number","require","default","thumbnailSize","drop","Boolean","dropText","String","undefined","methods","handleFileChange","e","self","this","target","files","file","ext","getExt","toLowerCase","heic2any","fetch","then","res","blob","toType","quality","rb","resultBlob","errors","validate","errorCallback","resize","fileName","successCallback","assign","messages","filename","pos","lastIndexOf","size","Math","floor","values","$emit","callback","image","Image","fr","FileReader","onload","evt","width","height","ratio","canvas","document","createElement","ctx","getContext","clearRect","drawImage","base64","toDataURL","bin","atob","split","len","barr","Uint8Array","charCodeAt","resizeBlob","Blob","ofileData","fileData","ofileSize","fileSize","fileType","onerror","src","readAsDataURL","handleDragEnter","preventDefault","stopPropagation","setIsHover","handleDragLeave","handleDragOver","handleDrop","dataTransfer","__exports__","render","store","reactive","images","handleChange","list","app","createApp","Dev","mount"],"mappings":"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","file":"js/app.1b77ae07.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"0339\",\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","<template>\n  <div v-if=\"drop\">\n    <div id=\"drop-zone\"\n         :class=\"[isHover ? 'hover': '']\"\n         @dragover=\"handleDragEnter\"\n         @dragleave=\"handleDragLeave\"\n         @drop=\"handleDrop\"\n    >\n      <p>{{dropText}}</p>\n      <input\n          type=\"file\"\n          :id=\"id\"\n          :accept=\"accept\"\n          :capture=\"capture\"\n          :multiple=\"multiple\"\n          @change=\"handleFileChange\"\n      />\n    </div>\n  </div>\n  <div v-else>\n    <input\n        type=\"file\"\n        :id=\"id\"\n        :accept=\"accept\"\n        :capture=\"capture\"\n        :multiple=\"multiple\"\n        @change=\"handleFileChange\"\n    />\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      isHover: false\n    }\n  },\n  props: {\n    maxFileSize: {\n      type     : Number,\n      require  : false,\n      default  : 10485760\n    },\n    thumbnailSize: {\n      type     : Number,\n      require  : false,\n      default  : 500\n    },\n    drop: {\n      type     : Boolean,\n      require  : false,\n      default  : false\n    },\n    dropText: {\n      type     : String,\n      require  : false,\n      default  : 'image drop here !!'\n    },\n    id: {\n      type     : String,\n      require  : false,\n      default  : 'js-image-base64'\n    },\n    accept: {\n      type     : String,\n      require  : false,\n      default  : 'image/*'\n    },\n    capture: {\n      type     : String,\n      require  : false,\n      default  : undefined\n    },\n    multiple: {\n      type     : Boolean,\n      require  : false,\n      default  : undefined\n    }\n  },\n  methods: {\n    // ファイル選択時のハンドラー\n    handleFileChange: function(e) {\n      const self = this;\n      for (let file of e.target.files) {\n        const ext = this.getExt(file.name).toLowerCase()\n        if (ext === 'heic') {\n          // HEIC対応 iphone11 以降で撮影された画像にも対応する\n          // console.log('HEIC形式の画像なのでJPEGに変換します。')\n          const heic2any = require('heic2any');\n          if (typeof window !== 'undefined') {\n            fetch('https://alexcorvi.github.io/heic2any/demo/14.heic')\n                .then((res) => res.blob())\n                .then((blob) => heic2any({\n                  blob,\n                  toType: 'image/jpeg',\n                  quality: 1,\n                })\n                    .then(function (rb) {\n                      const resultBlob = rb;\n                      const errors = self.validate(resultBlob);\n                      if (0 < errors.length) {\n                        self.errorCallback(errors);\n                        return;\n                      }\n                      self.resize(file.name, resultBlob, function (res) {\n                        res.fileName = file.name;\n                        self.successCallback(Object.assign(Object.assign({}, res), { result: true, messages: ['正常終了'] }));\n                      }, function (errors) {\n                        self.errorCallback(errors);\n                        return;\n                      });\n                    }));\n          }\n        } else {\n          const errors = self.validate(file)\n          if (0 < errors.length) {\n            this.errorCallback(errors)\n            return\n          }\n          self.resize(\n              file.name,\n              file,\n              function(res) {\n                self.successCallback({\n                  ...res,\n                  result: true,\n                  messages: ['正常終了'],\n                })\n              },\n              function(errors) {\n                self.errorCallback(errors)\n                return\n              },\n          )\n        }\n      }\n    },\n    getExt: function(filename) {\n      const pos = filename.lastIndexOf('.')\n      if (pos === -1) return ''\n      return filename.slice(pos + 1)\n    },\n    // 入力チェック\n    validate: function(blob) {\n      const errors = []\n      // ファイルサイズチェック\n      if (this.maxFileSize < blob.size) {\n        errors.push('画像ファイルのファイルサイズが最大値(' + Math.floor(this.maxFileSize / 1000000) + 'MB)を超えています。')\n      }\n      return errors\n    },\n    errorCallback: function(values) {\n      this.$emit('handleChange', { result: false, messages: values })\n    },\n    successCallback: function(values) {\n      this.$emit('handleChange', { ...values })\n    },\n    // 画像のリサイズ\n    resize: function(fileName, blob, callback) {\n      const self = this;\n      const image = new Image()\n      const fr = new FileReader()\n      fr.onload = function(evt) {\n        // リサイズする\n        image.onload = function() {\n          let width, height\n          if (image.width > image.height) {\n            // 横長の画像は横のサイズを指定値にあわせる\n            const ratio = image.height / image.width\n            width = self.thumbnailSize\n            height = self.thumbnailSize * ratio\n          } else {\n            // 縦長の画像は縦のサイズを指定値にあわせる\n            const ratio = image.width / image.height\n            width = self.thumbnailSize * ratio\n            height = self.thumbnailSize\n          }\n          // サムネ描画用canvasのサイズを上で算出した値に変更\n          const canvas = document.createElement('canvas')\n          canvas.id = 'canvas'\n          canvas.width = width\n          canvas.height = height\n          const ctx = canvas.getContext('2d')\n          if (ctx) {\n            // canvasに既に描画されている画像をクリア\n            ctx.clearRect(0, 0, width, height)\n            // canvasにサムネイルを描画\n            ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height)\n          }\n          // canvasからbase64画像データを取得\n          const base64 = canvas.toDataURL('image/jpeg')\n          // base64からBlobデータを作成\n          const bin = atob(base64.split('base64,')[1])\n          const len = bin.length\n          const barr = new Uint8Array(len)\n          let i = 0\n          while (i < len) {\n            barr[i] = bin.charCodeAt(i)\n            i++\n          }\n          const resizeBlob = new Blob([barr], { type: 'image/jpeg' })\n          callback({\n            fileName: fileName,\n            ofileData: evt.target ? evt.target.result : null,\n            fileData: base64,\n            ofileSize: blob.size,\n            fileSize: resizeBlob.size,\n            fileType: resizeBlob.type,\n          })\n        }\n        image.onerror = function() {\n          this.errorCallback(['選択されたファイルをロードできません。'])\n        }\n        image.src = evt.target ? evt.target.result + '' : ''\n      }\n      fr.readAsDataURL(blob)\n    },\n    handleDragEnter: function(e){\n      e.preventDefault();\n      e.stopPropagation();\n      this.setIsHover(true);\n    },\n    handleDragLeave: function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.setIsHover(false);\n    },\n    handleDragOver: function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    handleDrop: function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.setIsHover(false);\n      var files = e.dataTransfer.files;\n      if (files.length === 0) {\n        return;\n      }\n      this.handleFileChange({target: {files}})\n    },\n    setIsHover: function(isHover) {\n      this.isHover= isHover\n    }\n  }\n}\n</script>\n","import { render } from \"./vue-image-base64.vue?vue&type=template&id=3523e421\"\nimport script from \"./vue-image-base64.vue?vue&type=script&lang=js\"\nexport * from \"./vue-image-base64.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/iseyoshitaka/github/isystk/vue-image-base64/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"wrap\">\n    <header>\n      <div class=\"header-image\">\n        <div class=\"logo\">VUE3 IMAGE BASE64</div>\n      </div>\n    </header>\n    <div class=\"content\">\n      <main>\n        <article class=\"detail\">\n          <div class=\"entry-header\">\n            <h1 class=\"entry-title\">\n              <a href=\"#\">画像ファイルをBase64に変換するVue.js用コンポーネントです</a>\n            </h1>\n          </div>\n          <div class=\"entry-content\">\n            <h2>デモ</h2>\n            <Vue3ImageBase64\n              :maxFileSize=\"10485760\"\n              :thumbnailSize=\"100\"\n              :drop=\"true\"\n              dropText=\"ファイルをドラッグ＆ドロップもしくは\"\n              capture=\"environment\"\n              accept=\"*\"\n              :multiple=\"true\"\n              @handleChange=\"handleChange\"\n            />\n            <div>\n              <table id=\"select-image\">\n                <thead>\n                  <tr>\n                    <th>ファイル名</th>\n                    <th>元の画像</th>\n                    <th>リサイズ後画像</th>\n                    <th>元のサイズ</th>\n                    <th>リサイズ後サイズ</th>\n                    <th>タイプ</th>\n                  </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"image in store.images.data\" :key=\"image.fileName\">\n                      <td>{{image.fileName}}</td>\n                      <td><img :src=\"image.ofileData\" /></td>\n                      <td><img :src=\"image.fileData\" /></td>\n                      <td>{{image.ofileSize}}</td>\n                      <td>{{image.fileSize}}</td>\n                      <td>{{image.fileType}}</td>\n                    </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </article>\n      </main>\n    </div>\n  </div>\n</template>\n\n\n<script type=\"ts\" setup>\nimport Vue3ImageBase64 from '@/vue-image-base64.vue';\nimport {reactive} from \"vue\";\n\nconst store = reactive({\n  images: {data: []},\n  errors: []\n})\n\nconst handleChange = function(data) {\n  if (data.result) {\n    let list =store.images.data\n    list.push(data);\n    store.images = {data: list}\n  } else {\n    store.errors = data.messages;\n  }\n}\n</script>","import script from \"./serve.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./serve.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue';\nimport Dev from './serve.vue';\n\nimport './assets/style.css'\n\nconst app = createApp(Dev);\napp.mount('#app');\n"],"sourceRoot":""}